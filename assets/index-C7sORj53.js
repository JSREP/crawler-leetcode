import{r as s,_ as y,a as ye,b as U,c as g,d as _e}from"./index-CKptxHI1.js";var I,Te=new Uint8Array(16);function xe(){if(!I&&(I=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!I))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return I(Te)}const Le=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ue(r){return typeof r=="string"&&Le.test(r)}var M=[];for(var B=0;B<256;++B)M.push((B+256).toString(16).substr(1));function Ne(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(M[r[i+0]]+M[r[i+1]]+M[r[i+2]]+M[r[i+3]]+"-"+M[r[i+4]]+M[r[i+5]]+"-"+M[r[i+6]]+M[r[i+7]]+"-"+M[r[i+8]]+M[r[i+9]]+"-"+M[r[i+10]]+M[r[i+11]]+M[r[i+12]]+M[r[i+13]]+M[r[i+14]]+M[r[i+15]]).toLowerCase();if(!Ue(t))throw TypeError("Stringified UUID is invalid");return t}function be(r,i,t){r=r||{};var n=r.random||(r.rng||xe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Ne(n)}function k(r){return s.createElement("i",{className:"rmel-iconfont rmel-icon-"+r.type})}function Ke(r){return s.createElement("div",{className:"rc-md-navigation "+(r.visible?"visible":"in-visible")},s.createElement("div",{className:"navigation-nav left"},s.createElement("div",{className:"button-wrap"},r.left)),s.createElement("div",{className:"navigation-nav right"},s.createElement("div",{className:"button-wrap"},r.right)))}function He(r){return s.createElement("div",{className:"tool-bar",style:r.style},r.children)}var P={exports:{}},fe;function Ie(){return fe||(fe=1,function(r){var i=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function e(u,d,c){this.fn=u,this.context=d,this.once=c||!1}function o(u,d,c,h,p){if(typeof c!="function")throw new TypeError("The listener must be a function");var b=new e(c,h||u,p),m=t?t+d:d;return u._events[m]?u._events[m].fn?u._events[m]=[u._events[m],b]:u._events[m].push(b):(u._events[m]=b,u._eventsCount++),u}function a(u,d){--u._eventsCount===0?u._events=new n:delete u._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],c,h;if(this._eventsCount===0)return d;for(h in c=this._events)i.call(c,h)&&d.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},l.prototype.listeners=function(d){var c=t?t+d:d,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,b=h.length,m=new Array(b);p<b;p++)m[p]=h[p].fn;return m},l.prototype.listenerCount=function(d){var c=t?t+d:d,h=this._events[c];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,c,h,p,b,m){var w=t?t+d:d;if(!this._events[w])return!1;var f=this._events[w],x=arguments.length,T,E;if(f.fn){switch(f.once&&this.removeListener(d,f.fn,void 0,!0),x){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,c),!0;case 3:return f.fn.call(f.context,c,h),!0;case 4:return f.fn.call(f.context,c,h,p),!0;case 5:return f.fn.call(f.context,c,h,p,b),!0;case 6:return f.fn.call(f.context,c,h,p,b,m),!0}for(E=1,T=new Array(x-1);E<x;E++)T[E-1]=arguments[E];f.fn.apply(f.context,T)}else{var R=f.length,L;for(E=0;E<R;E++)switch(f[E].once&&this.removeListener(d,f[E].fn,void 0,!0),x){case 1:f[E].fn.call(f[E].context);break;case 2:f[E].fn.call(f[E].context,c);break;case 3:f[E].fn.call(f[E].context,c,h);break;case 4:f[E].fn.call(f[E].context,c,h,p);break;default:if(!T)for(L=1,T=new Array(x-1);L<x;L++)T[L-1]=arguments[L];f[E].fn.apply(f[E].context,T)}}return!0},l.prototype.on=function(d,c,h){return o(this,d,c,h,!1)},l.prototype.once=function(d,c,h){return o(this,d,c,h,!0)},l.prototype.removeListener=function(d,c,h,p){var b=t?t+d:d;if(!this._events[b])return this;if(!c)return a(this,b),this;var m=this._events[b];if(m.fn)m.fn===c&&(!p||m.once)&&(!h||m.context===h)&&a(this,b);else{for(var w=0,f=[],x=m.length;w<x;w++)(m[w].fn!==c||p&&!m[w].once||h&&m[w].context!==h)&&f.push(m[w]);f.length?this._events[b]=f.length===1?f[0]:f:a(this,b)}return this},l.prototype.removeAllListeners=function(d){var c;return d?(c=t?t+d:d,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=t,l.EventEmitter=l,r.exports=l}(P)),P.exports}var Ve=Ie(),we=function(r){y(i,r);function i(){for(var t,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return t=r.call.apply(r,[this].concat(e))||this,t.EVENT_CHANGE="a1",t.EVENT_FULL_SCREEN="a2",t.EVENT_VIEW_CHANGE="a3",t.EVENT_KEY_DOWN="a4",t.EVENT_EDITOR_KEY_DOWN="a5",t.EVENT_FOCUS="a5",t.EVENT_BLUR="a6",t.EVENT_SCROLL="a7",t.EVENT_LANG_CHANGE="b1",t}return i}(Ve.EventEmitter),N=new we;const Ae={clearTip:"Are you sure you want to clear all contents?",btnHeader:"Header",btnClear:"Clear",btnBold:"Bold",btnItalic:"Italic",btnUnderline:"Underline",btnStrikethrough:"Strikethrough",btnUnordered:"Unordered list",btnOrdered:"Ordered list",btnQuote:"Quote",btnLineBreak:"Line break",btnInlineCode:"Inline code",btnCode:"Code",btnTable:"Table",btnImage:"Image",btnLink:"Link",btnUndo:"Undo",btnRedo:"Redo",btnFullScreen:"Full screen",btnExitFullScreen:"Exit full screen",btnModeEditor:"Only display editor",btnModePreview:"Only display preview",btnModeAll:"Display both editor and preview",selectTabMap:"Actual input when typing a Tab key",tab:"Tab",spaces:"Spaces"},De={clearTip:"您确定要清空所有内容吗？",btnHeader:"标题",btnClear:"清空",btnBold:"加粗",btnItalic:"斜体",btnUnderline:"下划线",btnStrikethrough:"删除线",btnUnordered:"无序列表",btnOrdered:"有序列表",btnQuote:"引用",btnLineBreak:"换行",btnInlineCode:"行内代码",btnCode:"代码块",btnTable:"表格",btnImage:"图片",btnLink:"链接",btnUndo:"撤销",btnRedo:"重做",btnFullScreen:"全屏",btnExitFullScreen:"退出全屏",btnModeEditor:"仅显示编辑器",btnModePreview:"仅显示预览",btnModeAll:"显示编辑器与预览",selectTabMap:"按下 Tab 键时实际的输入",tab:"制表符",spaces:"空格"};var We=function(){function r(){this.langs={enUS:Ae,zhCN:De},this.current="enUS",this.setUp()}var i=r.prototype;return i.setUp=function(){if(!(typeof window>"u")){var n="enUS";if(navigator.language){var e=navigator.language.split("-");n=e[0],e.length!==1&&(n+=e[e.length-1].toUpperCase())}if(navigator.browserLanguage){var o=navigator.browserLanguage.split("-");n=o[0],o[1]&&(n+=o[1].toUpperCase())}this.current!==n&&this.isAvailable(n)&&(this.current=n,N.emit(N.EVENT_LANG_CHANGE,this,n,this.langs[n]))}},i.isAvailable=function(n){return typeof this.langs[n]<"u"},i.add=function(n,e){this.langs[n]=e},i.setCurrent=function(n){if(!this.isAvailable(n))throw new Error("Language "+n+" is not exists");this.current!==n&&(this.current=n,N.emit(N.EVENT_LANG_CHANGE,this,n,this.langs[n]))},i.get=function(n,e){var o=this.langs[this.current][n]||"";return e&&Object.keys(e).forEach(function(a){o=o.replace(new RegExp("\\{"+a+"\\}","g"),e[a])}),o},i.getCurrent=function(){return this.current},r}(),v=new We,C=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.getConfig=function(e,o){return typeof this.props.config[e]<"u"&&this.props.config[e]!==null?this.props.config[e]:o},ye(i,[{key:"editor",get:function(){return this.props.editor}},{key:"editorConfig",get:function(){return this.props.editorConfig}}]),i}(s.Component);C.pluginName="";C.align="left";C.defaultConfig={};var q=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.render=function(){return s.createElement("span",{className:"rc-md-divider"})},i}(C);q.pluginName="divider";var Oe={start:0,end:0,text:""};function Re(r,i){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=Fe(r))||i){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(r,i){if(r){if(typeof r=="string")return pe(r,i);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pe(r,i)}}function pe(r,i){(i==null||i>r.length)&&(i=r.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=r[t];return n}function Y(r){return r&&(r instanceof Promise||(typeof r=="object"||typeof r=="function")&&typeof r.then=="function")}function Be(r,i){for(var t="",n=i;n--;)t+=r;return t}function Pe(r,i){var t=i.withKey,n=i.keyCode,e=i.key,o=i.aliasCommand,a={ctrlKey:r.ctrlKey,metaKey:r.metaKey,altKey:r.altKey,shiftKey:r.shiftKey,keyCode:r.keyCode,key:r.key};if(o&&(a.ctrlKey=a.ctrlKey||a.metaKey),t&&t.length>0)for(var l=Re(t),u;!(u=l()).done;){var d=u.value;if(typeof a[d]<"u"&&!a[d])return!1}else if(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)return!1;return a.key?a.key===e:a.keyCode===n}function z(r,i){var t=r.split(`
`),n=r.substr(0,i).split(`
`),e=n.length,o=n[n.length-1].length,a=t[n.length-1],l=n.length>1?n[n.length-2]:null,u=t.length>n.length?t[n.length]:null;return{line:e,col:o,beforeText:r.substr(0,i),afterText:r.substr(i),curLine:a,prevLine:l,nextLine:u}}var K={bold:["**","**"],italic:["*","*"],underline:["++","++"],strikethrough:["~~","~~"],quote:[`
> `,`
`],inlinecode:["`","`"],code:["\n```\n","\n```\n"]};for(var V=1;V<=6;V++)K["h"+V]=[`
`+Be("#",V)+" ",`
`];function ze(r){for(var i=r.row,t=i===void 0?2:i,n=r.col,e=n===void 0?2:n,o=["|"],a=["|"],l=["|"],u="",d=1;d<=e;d++)o.push(" Head |"),l.push(" --- |"),a.push(" Data |");for(var c=1;c<=t;c++)u+=`
`+a.join("");return o.join("")+`
`+l.join("")+u}function me(r,i){var t=i;if(t.substr(0,1)!==`
`&&(t=`
`+t),r==="unordered")return t.length>1?t.replace(/\n/g,`
* `).trim():"* ";var n=1;return t.length>1?t.replace(/\n/g,function(){return`
`+n+++". "}).trim():"1. "}function G(r,i){return{text:r,newBlock:i,selection:{start:r.length,end:r.length}}}function Q(r,i,t){if(typeof K[i]<"u")return{text:""+K[i][0]+r+K[i][1],selection:{start:K[i][0].length,end:K[i][0].length+r.length}};switch(i){case"tab":var n=t.tabMapValue===1?"	":" ".repeat(t.tabMapValue),e=n+r.replace(/\n/g,`
`+n),o=r.includes(`
`)?r.match(/\n/g).length:0;return{text:e,selection:{start:t.tabMapValue,end:t.tabMapValue*(o+1)+r.length}};case"unordered":return G(me("unordered",r),!0);case"order":return G(me("order",r),!0);case"hr":return G("---",!0);case"table":return{text:ze(t),newBlock:!0};case"image":return{text:"!["+(r||t.target)+"]("+(t.imageUrl||"")+")",selection:{start:2,end:r.length+2}};case"link":return{text:"["+r+"]("+(t.linkUrl||"")+")",selection:{start:1,end:r.length+1}}}return{text:r,selection:{start:0,end:r.length}}}function Ce(r,i){var t={};return Object.keys(r).forEach(function(n){if(typeof i[n]>"u"){t[n]=r[n];return}if(typeof i[n]=="object"){Array.isArray(i[n])?t[n]=[].concat(i[n]):t[n]=Ce(r[n],i[n]);return}t[n]=i[n]}),t}function Ge(r){for(var i=U({},r),t=arguments.length,n=new Array(t>1?t-1:0),e=1;e<t;e++)n[e-1]=arguments[e];return n.forEach(function(o){typeof o=="object"&&(i=Ce(i,o))}),i}function Ee(r,i){var t=Q("","image",{target:"Uploading_"+be(),imageUrl:""}).text,n=new Promise(function(e){var o=!0,a=function(d){o&&console.warn("Deprecated: onImageUpload should return a Promise, callback will be removed in future"),e(Q("","image",{target:r.name,imageUrl:d}).text)},l=i(r,a);Y(l)&&(o=!1,l.then(a))});return{placeholder:t,uploaded:n}}var ge={theme:"default",view:{menu:!0,md:!0,html:!0},canView:{menu:!0,md:!0,html:!0,both:!0,fullScreen:!0,hideMenu:!0},htmlClass:"",markdownClass:"",syncScrollMode:["rightFollowLeft","leftFollowRight"],imageUrl:"",imageAccept:"",linkUrl:"",loggerMaxSize:100,loggerInterval:600,table:{maxRow:4,maxCol:6},allowPasteImage:!0,onImageUpload:void 0,onCustomImageUpload:void 0,shortcuts:!0,onChangeTrigger:"both"},$e=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.el=s.createRef(),e}var t=i.prototype;return t.getElement=function(){return this.el.current},t.getHeight=function(){return this.el.current?this.el.current.offsetHeight:0},i}(s.Component),qe=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.getHtml=function(){return typeof this.props.html=="string"?this.props.html:this.el.current?this.el.current.innerHTML:""},t.render=function(){return typeof this.props.html=="string"?s.createElement("div",{ref:this.el,dangerouslySetInnerHTML:{__html:this.props.html},className:this.props.className||"custom-html-style"}):s.createElement("div",{ref:this.el,className:this.props.className||"custom-html-style"},this.props.html)},i}($e);function $(r,i){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=Qe(r))||i){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qe(r,i){if(r){if(typeof r=="string")return ve(r,i);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ve(r,i)}}function ve(r,i){(i==null||i>r.length)&&(i=r.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=r[t];return n}var S=function(r){y(i,r),i.use=function(e,o){o===void 0&&(o={});for(var a=0;a<i.plugins.length;a++)if(i.plugins[a].comp===e){i.plugins.splice(a,1,{comp:e,config:o});return}i.plugins.push({comp:e,config:o})},i.unuse=function(e){for(var o=0;o<i.plugins.length;o++)if(i.plugins[o].comp===e){i.plugins.splice(o,1);return}},i.unuseAll=function(){i.plugins=[]};function i(n){var e;return e=r.call(this,n)||this,e.nodeMdText=s.createRef(),e.nodeMdPreview=s.createRef(),e.nodeMdPreviewWrapper=s.createRef(),e.hasContentChanged=!0,e.composing=!1,e.pluginApis=new Map,e.scrollScale=1,e.isSyncingScroll=!1,e.shouldSyncScroll="md",e.keyboardListeners=[],e.emitter=new we,e.config=Ge(ge,e.props.config,e.props),e.state={text:(e.props.value||e.props.defaultValue||"").replace(/↵/g,`
`),html:"",view:e.config.view||ge.view,fullScreen:!1,plugins:e.getPlugins()},e.config.canView&&!e.config.canView.menu&&(e.state.view.menu=!1),e.nodeMdText=s.createRef(),e.nodeMdPreviewWrapper=s.createRef(),e.handleChange=e.handleChange.bind(g(e)),e.handlePaste=e.handlePaste.bind(g(e)),e.handleDrop=e.handleDrop.bind(g(e)),e.handleToggleMenu=e.handleToggleMenu.bind(g(e)),e.handleKeyDown=e.handleKeyDown.bind(g(e)),e.handleEditorKeyDown=e.handleEditorKeyDown.bind(g(e)),e.handleLocaleUpdate=e.handleLocaleUpdate.bind(g(e)),e.handleFocus=e.handleFocus.bind(g(e)),e.handleBlur=e.handleBlur.bind(g(e)),e.handleInputScroll=e.handleSyncScroll.bind(g(e),"md"),e.handlePreviewScroll=e.handleSyncScroll.bind(g(e),"html"),e}var t=i.prototype;return t.componentDidMount=function(){var e=this.state.text;this.renderHTML(e),N.on(N.EVENT_LANG_CHANGE,this.handleLocaleUpdate),v.setUp()},t.componentWillUnmount=function(){N.off(N.EVENT_LANG_CHANGE,this.handleLocaleUpdate)},t.componentDidUpdate=function(e){if(typeof this.props.value<"u"&&this.props.value!==this.state.text){var o=this.props.value;typeof o!="string"&&(o=String(o).toString()),o=o.replace(/↵/g,`
`),this.state.text!==o&&(this.setState({text:o}),this.renderHTML(o))}e.plugins!==this.props.plugins&&this.setState({plugins:this.getPlugins()})},t.isComposing=function(){return this.composing},t.getPlugins=function(){var e=this,o=[];if(this.props.plugins)for(var a=function(p){if(p===q.pluginName){o.push({comp:q,config:{}});return}for(var b=$(i.plugins),m;!(m=b()).done;){var w=m.value;if(w.comp.pluginName===p){o.push(w);return}}},l=$(this.props.plugins),u;!(u=l()).done;){var d=u.value;d==="fonts"?(a("font-bold"),a("font-italic"),a("font-underline"),a("font-strikethrough"),a("list-unordered"),a("list-ordered"),a("block-quote"),a("block-wrap"),a("block-code-inline"),a("block-code-block")):a(d)}else o=[].concat(i.plugins);var c={};return o.forEach(function(h){typeof c[h.comp.align]>"u"&&(c[h.comp.align]=[]);var p=h.comp.pluginName==="divider"?be():h.comp.pluginName;c[h.comp.align].push(s.createElement(h.comp,{editor:e,editorConfig:e.config,config:U({},h.comp.defaultConfig||{},h.config||{}),key:p}))}),c},t.handleSyncScroll=function(e,o){var a=this;if(e===this.shouldSyncScroll){this.props.onScroll&&this.props.onScroll(o,e),this.emitter.emit(this.emitter.EVENT_SCROLL,o,e);var l=this.config.syncScrollMode,u=l===void 0?[]:l;u.includes(e==="md"?"rightFollowLeft":"leftFollowRight")&&(this.hasContentChanged&&this.nodeMdText.current&&this.nodeMdPreviewWrapper.current&&(this.scrollScale=this.nodeMdText.current.scrollHeight/this.nodeMdPreviewWrapper.current.scrollHeight,this.hasContentChanged=!1),this.isSyncingScroll||(this.isSyncingScroll=!0,requestAnimationFrame(function(){a.nodeMdText.current&&a.nodeMdPreviewWrapper.current&&(e==="md"?a.nodeMdPreviewWrapper.current.scrollTop=a.nodeMdText.current.scrollTop/a.scrollScale:a.nodeMdText.current.scrollTop=a.nodeMdPreviewWrapper.current.scrollTop*a.scrollScale),a.isSyncingScroll=!1})))}},t.renderHTML=function(e){var o=this;if(!this.props.renderHTML)return console.error("renderHTML props is required!"),Promise.resolve();var a=this.props.renderHTML(e);return Y(a)?a.then(function(l){return o.setHtml(l)}):typeof a=="function"?this.setHtml(a()):this.setHtml(a)},t.setHtml=function(e){var o=this;return new Promise(function(a){o.setState({html:e},a)})},t.handleToggleMenu=function(){this.setView({menu:!this.state.view.menu})},t.handleFocus=function(e){var o=this.props.onFocus;o&&o(e),this.emitter.emit(this.emitter.EVENT_FOCUS,e)},t.handleBlur=function(e){var o=this.props.onBlur;o&&o(e),this.emitter.emit(this.emitter.EVENT_BLUR,e)},t.handleChange=function(e){e.persist();var o=e.target.value;this.setText(o,e)},t.handlePaste=function(e){if(!(!this.config.allowPasteImage||!this.config.onImageUpload)){var o=e.nativeEvent,a=(o.clipboardData||window.clipboardData).items;a&&(e.preventDefault(),this.uploadWithDataTransfer(a))}},t.handleDrop=function(e){if(this.config.onImageUpload){var o=e.nativeEvent;if(o.dataTransfer){var a=o.dataTransfer.items;a&&(e.preventDefault(),this.uploadWithDataTransfer(a))}}},t.handleEditorKeyDown=function(e){var o=this,a=e.keyCode,l=e.key,u=e.currentTarget;if((a===13||l==="Enter")&&this.composing===!1){var d=u.value,c=u.selectionStart,h=z(d,c),p=function(){var T=u.value.substr(0,c-h.curLine.length)+u.value.substr(c);o.setText(T,void 0,{start:c-h.curLine.length,end:c-h.curLine.length}),e.preventDefault()},b=function(T){o.insertText(`
`+T,!1,{start:T.length+1,end:T.length+1}),e.preventDefault()},m=h.curLine.match(/^(\s*?)\* /);if(m){if(/^(\s*?)\* $/.test(h.curLine)){p();return}b(m[0]);return}var w=h.curLine.match(/^(\s*?)(\d+)\. /);if(w){if(/^(\s*?)(\d+)\. $/.test(h.curLine)){p();return}var f=""+w[1]+(parseInt(w[2],10)+1)+". ";b(f);return}}this.emitter.emit(this.emitter.EVENT_EDITOR_KEY_DOWN,e)},t.handleLocaleUpdate=function(){this.forceUpdate()},t.getMdElement=function(){return this.nodeMdText.current},t.getHtmlElement=function(){return this.nodeMdPreviewWrapper.current},t.clearSelection=function(){this.nodeMdText.current&&this.nodeMdText.current.setSelectionRange(0,0,"none")},t.getSelection=function(){var e=this.nodeMdText.current;if(!e)return U({},Oe);var o=e.selectionStart,a=e.selectionEnd,l=(e.value||"").slice(o,a);return{start:o,end:a,text:l}},t.setSelection=function(e){this.nodeMdText.current&&(this.nodeMdText.current.setSelectionRange(e.start,e.end,"forward"),this.nodeMdText.current.focus())},t.insertMarkdown=function(e,o){o===void 0&&(o={});var a=this.getSelection(),l=o?U({},o):{};if(e==="image"&&(l=U({},l,{target:o.target||a.text||"",imageUrl:o.imageUrl||this.config.imageUrl})),e==="link"&&(l=U({},l,{linkUrl:this.config.linkUrl})),e==="tab"&&a.start!==a.end){var u=this.getMdValue().slice(0,a.start).lastIndexOf(`
`)+1;this.setSelection({start:u,end:a.end})}var d=Q(a.text,e,l),c=d.text,h=d.selection;if(d.newBlock){var p=z(this.getMdValue(),a.start),b=p.col,m=p.curLine;b>0&&m.length>0&&(c=`
`+c,h&&(h.start++,h.end++));var w=p.afterText;a.start!==a.end&&(w=z(this.getMdValue(),a.end).afterText),w.trim()!==""&&w.substr(0,2)!==`

`&&(w.substr(0,1)!==`
`&&(c+=`
`),c+=`
`)}this.insertText(c,!0,h)},t.insertPlaceholder=function(e,o){var a=this;this.insertText(e,!0),o.then(function(l){var u=a.getMdValue().replace(e,l);a.setText(u)})},t.insertText=function(e,o,a){e===void 0&&(e=""),o===void 0&&(o=!1);var l=this.state.text,u=this.getSelection(),d=l.slice(0,u.start),c=l.slice(o?u.end:u.start,l.length);this.setText(d+e+c,void 0,a?{start:a.start+d.length,end:a.end+d.length}:{start:u.start,end:u.start})},t.setText=function(e,o,a){var l=this;e===void 0&&(e="");var u=this.config.onChangeTrigger,d=u===void 0?"both":u,c=e.replace(/↵/g,`
`);if(this.state.text!==e){this.setState({text:c}),this.props.onChange&&(d==="both"||d==="beforeRender")&&this.props.onChange({text:c,html:this.getHtmlValue()},o),this.emitter.emit(this.emitter.EVENT_CHANGE,e,o,typeof o>"u"),a&&setTimeout(function(){return l.setSelection(a)}),this.hasContentChanged||(this.hasContentChanged=!0);var h=this.renderHTML(c);(d==="both"||d==="afterRender")&&h.then(function(){l.props.onChange&&l.props.onChange({text:l.state.text,html:l.getHtmlValue()},o)})}},t.getMdValue=function(){return this.state.text},t.getHtmlValue=function(){return typeof this.state.html=="string"?this.state.html:this.nodeMdPreview.current?this.nodeMdPreview.current.getHtml():""},t.onKeyboard=function(e){var o=this;if(Array.isArray(e)){e.forEach(function(a){return o.onKeyboard(a)});return}this.keyboardListeners.includes(e)||this.keyboardListeners.push(e)},t.offKeyboard=function(e){var o=this;if(Array.isArray(e)){e.forEach(function(l){return o.offKeyboard(l)});return}var a=this.keyboardListeners.indexOf(e);a>=0&&this.keyboardListeners.splice(a,1)},t.handleKeyDown=function(e){for(var o=$(this.keyboardListeners),a;!(a=o()).done;){var l=a.value;if(Pe(e,l)){e.preventDefault(),l.callback(e);return}}this.emitter.emit(this.emitter.EVENT_KEY_DOWN,e)},t.getEventType=function(e){switch(e){case"change":return this.emitter.EVENT_CHANGE;case"fullscreen":return this.emitter.EVENT_FULL_SCREEN;case"viewchange":return this.emitter.EVENT_VIEW_CHANGE;case"keydown":return this.emitter.EVENT_KEY_DOWN;case"editor_keydown":return this.emitter.EVENT_EDITOR_KEY_DOWN;case"blur":return this.emitter.EVENT_BLUR;case"focus":return this.emitter.EVENT_FOCUS;case"scroll":return this.emitter.EVENT_SCROLL}},t.on=function(e,o){var a=this.getEventType(e);a&&this.emitter.on(a,o)},t.off=function(e,o){var a=this.getEventType(e);a&&this.emitter.off(a,o)},t.setView=function(e){var o=this,a=U({},this.state.view,e);this.setState({view:a},function(){o.emitter.emit(o.emitter.EVENT_VIEW_CHANGE,a)})},t.getView=function(){return U({},this.state.view)},t.fullScreen=function(e){var o=this;this.state.fullScreen!==e&&this.setState({fullScreen:e},function(){o.emitter.emit(o.emitter.EVENT_FULL_SCREEN,e)})},t.registerPluginApi=function(e,o){this.pluginApis.set(e,o)},t.unregisterPluginApi=function(e){this.pluginApis.delete(e)},t.callPluginApi=function(e){var o=this.pluginApis.get(e);if(!o)throw new Error("API "+e+" not found");for(var a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];return o.apply(void 0,l)},t.isFullScreen=function(){return this.state.fullScreen},t.uploadWithDataTransfer=function(e){var o=this,a=this.config.onImageUpload;if(a){var l=[];Array.prototype.forEach.call(e,function(u){if(u.kind==="file"&&u.type.includes("image")){var d=u.getAsFile();if(d){var c=Ee(d,a);l.push(Promise.resolve(c.placeholder)),c.uploaded.then(function(h){var p=o.getMdValue().replace(c.placeholder,h),b=h.length-c.placeholder.length,m=o.getSelection();o.setText(p,void 0,{start:m.start+b,end:m.start+b})})}}else u.kind==="string"&&u.type==="text/plain"&&l.push(new Promise(function(h){return u.getAsString(h)}))}),Promise.all(l).then(function(u){var d=u.join(""),c=o.getSelection();o.insertText(d,!0,{start:c.start===c.end?d.length:0,end:d.length})})}},t.render=function(){var e=this,o=this.state,a=o.view,l=o.fullScreen,u=o.text,d=o.html,c=this.props,h=c.id,p=c.className,b=p===void 0?"":p,m=c.style,w=c.name,f=w===void 0?"textarea":w,x=c.autoFocus,T=c.placeholder,E=c.readOnly,R=this.config.canView&&this.config.canView.hideMenu&&!this.config.canView.menu,L=function(Me){return e.state.plugins[Me]||[]},F=!!a.menu,ke=h?h+"_md":void 0,Se=h?h+"_html":void 0;return s.createElement("div",{id:h,className:"rc-md-editor "+(l?"full":"")+" "+b,style:m,onKeyDown:this.handleKeyDown,onDrop:this.handleDrop},s.createElement(Ke,{visible:F,left:L("left"),right:L("right")}),s.createElement("div",{className:"editor-container"},R&&s.createElement(He,null,s.createElement("span",{className:"button button-type-menu",title:F?"hidden menu":"show menu",onClick:this.handleToggleMenu},s.createElement(k,{type:"expand-"+(F?"less":"more")}))),s.createElement("section",{className:"section sec-md "+(a.md?"visible":"in-visible")},s.createElement("textarea",{id:ke,ref:this.nodeMdText,name:f,autoFocus:x,placeholder:T,readOnly:E,value:u,className:"section-container input "+(this.config.markdownClass||""),wrap:"hard",onChange:this.handleChange,onScroll:this.handleInputScroll,onMouseOver:function(){return e.shouldSyncScroll="md"},onKeyDown:this.handleEditorKeyDown,onCompositionStart:function(){return e.composing=!0},onCompositionEnd:function(){return e.composing=!1},onPaste:this.handlePaste,onFocus:this.handleFocus,onBlur:this.handleBlur})),s.createElement("section",{className:"section sec-html "+(a.html?"visible":"in-visible")},s.createElement("div",{id:Se,className:"section-container html-wrap",ref:this.nodeMdPreviewWrapper,onMouseOver:function(){return e.shouldSyncScroll="html"},onScroll:this.handlePreviewScroll},s.createElement(qe,{html:d,className:this.config.htmlClass,ref:this.nodeMdPreview})))))},i}(s.Component);S.plugins=[];S.addLocale=v.add.bind(v);S.useLocale=v.setCurrent.bind(v);S.getLocale=v.getCurrent.bind(v);var A=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.timer=null,e.useTimer=e.getConfig("useTimer")||typeof requestAnimationFrame>"u",e.handleChange=e.handleChange.bind(g(e)),e.doResize=e.doResize.bind(g(e)),e}var t=i.prototype;return t.doResize=function(){var e=this,o=function(h){h.style.height="auto";var p=Math.min(Math.max(e.getConfig("min"),h.scrollHeight),e.getConfig("max"));return h.style.height=p+"px",p};this.timer=null;var a=this.editor.getView(),l=this.editor.getMdElement(),u=this.editor.getHtmlElement();if(l&&a.md){var d=o(l);u&&(u.style.height=d+"px");return}u&&a.html&&o(u)},t.handleChange=function(){if(this.timer===null){if(this.useTimer){this.timer=window.setTimeout(this.doResize);return}this.timer=requestAnimationFrame(this.doResize)}},t.componentDidMount=function(){this.editor.on("change",this.handleChange),this.editor.on("viewchange",this.handleChange),this.handleChange()},t.componentWillUnmount=function(){this.editor.off("change",this.handleChange),this.editor.off("viewchange",this.handleChange),this.timer!==null&&this.useTimer&&(window.clearTimeout(this.timer),this.timer=null)},t.render=function(){return s.createElement("span",null)},i}(C);A.pluginName="auto-resize";A.align="left";A.defaultConfig={min:200,max:1/0,useTimer:!1};var j=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-code-block",title:v.get("btnCode"),onClick:function(){return e.editor.insertMarkdown("code")}},s.createElement(k,{type:"code-block"}))},i}(C);j.pluginName="block-code-block";var Z=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-code-inline",title:v.get("btnInlineCode"),onClick:function(){return e.editor.insertMarkdown("inlinecode")}},s.createElement(k,{type:"code"}))},i}(C);Z.pluginName="block-code-inline";var J=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-quote",title:v.get("btnQuote"),onClick:function(){return e.editor.insertMarkdown("quote")}},s.createElement(k,{type:"quote"}))},i}(C);J.pluginName="block-quote";var X=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-wrap",title:v.get("btnLineBreak"),onClick:function(){return e.editor.insertMarkdown("hr")}},s.createElement(k,{type:"wrap"}))},i}(C);X.pluginName="block-wrap";var ee=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleClick=e.handleClick.bind(g(e)),e}var t=i.prototype;return t.handleClick=function(){if(this.editor.getMdValue()!==""&&window.confirm&&typeof window.confirm=="function"){var e=window.confirm(v.get("clearTip"));e&&this.editor.setText("")}},t.render=function(){return s.createElement("span",{className:"button button-type-clear",title:v.get("btnClear"),onClick:this.handleClick},s.createElement(k,{type:"delete"}))},i}(C);ee.pluginName="clear";var te=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboard={key:"b",keyCode:66,aliasCommand:!0,withKey:["ctrlKey"],callback:function(){return e.editor.insertMarkdown("bold")}},e}var t=i.prototype;return t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-bold",title:v.get("btnBold"),onClick:function(){return e.editor.insertMarkdown("bold")}},s.createElement(k,{type:"bold"}))},i}(C);te.pluginName="font-bold";var ne=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboard={key:"i",keyCode:73,aliasCommand:!0,withKey:["ctrlKey"],callback:function(){return e.editor.insertMarkdown("italic")}},e}var t=i.prototype;return t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-italic",title:v.get("btnItalic"),onClick:function(){return e.editor.insertMarkdown("italic")}},s.createElement(k,{type:"italic"}))},i}(C);ne.pluginName="font-italic";var re=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboard={key:"d",keyCode:68,aliasCommand:!0,withKey:["ctrlKey"],callback:function(){return e.editor.insertMarkdown("strikethrough")}},e}var t=i.prototype;return t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-strikethrough",title:v.get("btnStrikethrough"),onClick:function(){return e.editor.insertMarkdown("strikethrough")}},s.createElement(k,{type:"strikethrough"}))},i}(C);re.pluginName="font-strikethrough";var ie=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboard={key:"u",keyCode:85,withKey:["ctrlKey"],callback:function(){return e.editor.insertMarkdown("underline")}},e}var t=i.prototype;return t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-underline",title:v.get("btnUnderline"),onClick:function(){return e.editor.insertMarkdown("underline")}},s.createElement(k,{type:"underline"}))},i}(C);ie.pluginName="font-underline";var D=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleClick=e.handleClick.bind(g(e)),e.handleChange=e.handleChange.bind(g(e)),e.state={enable:e.editor.isFullScreen()},e}var t=i.prototype;return t.handleClick=function(){this.editor.fullScreen(!this.state.enable)},t.handleChange=function(e){this.setState({enable:e})},t.componentDidMount=function(){this.editor.on("fullscreen",this.handleChange)},t.componentWillUnmount=function(){this.editor.off("fullscreen",this.handleChange)},t.render=function(){if(this.editorConfig.canView&&this.editorConfig.canView.fullScreen){var e=this.state.enable;return s.createElement("span",{className:"button button-type-fullscreen",title:v.get(e?"btnExitFullScreen":"btnFullScreen"),onClick:this.handleClick},s.createElement(k,{type:e?"fullscreen-exit":"fullscreen"}))}return null},i}(C);D.pluginName="full-screen";D.align="right";var oe=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleClose=e.handleClose.bind(g(e)),e}var t=i.prototype;return t.handleClose=function(e){e.stopPropagation();var o=this.props.onClose;typeof o=="function"&&o()},t.render=function(){return s.createElement("div",{className:"drop-wrap "+(this.props.show?"show":"hidden"),onClick:this.handleClose},this.props.children)},i}(s.Component),Ye=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.handleHeader=function(e){var o=this.props.onSelectHeader;typeof o=="function"&&o(e)},t.render=function(){return s.createElement("ul",{className:"header-list"},s.createElement("li",{className:"list-item"},s.createElement("h1",{onClick:this.handleHeader.bind(this,"h1")},"H1")),s.createElement("li",{className:"list-item"},s.createElement("h2",{onClick:this.handleHeader.bind(this,"h2")},"H2")),s.createElement("li",{className:"list-item"},s.createElement("h3",{onClick:this.handleHeader.bind(this,"h3")},"H3")),s.createElement("li",{className:"list-item"},s.createElement("h4",{onClick:this.handleHeader.bind(this,"h4")},"H4")),s.createElement("li",{className:"list-item"},s.createElement("h5",{onClick:this.handleHeader.bind(this,"h5")},"H5")),s.createElement("li",{className:"list-item"},s.createElement("h6",{onClick:this.handleHeader.bind(this,"h6")},"H6")))},i}(s.Component),ae=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.show=e.show.bind(g(e)),e.hide=e.hide.bind(g(e)),e.state={show:!1},e}var t=i.prototype;return t.show=function(){this.setState({show:!0})},t.hide=function(){this.setState({show:!1})},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-header",title:v.get("btnHeader"),onMouseEnter:this.show,onMouseLeave:this.hide},s.createElement(k,{type:"font-size"}),s.createElement(oe,{show:this.state.show,onClose:this.hide},s.createElement(Ye,{onSelectHeader:function(a){return e.editor.insertMarkdown(a)}})))},i}(C);ae.pluginName="header";var je=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.timerId=void 0,e.locked=!1,e.input=s.createRef(),e}var t=i.prototype;return t.click=function(){var e=this;this.locked||!this.input.current||(this.locked=!0,this.input.current.value="",this.input.current.click(),this.timerId&&window.clearTimeout(this.timerId),this.timerId=window.setTimeout(function(){e.locked=!1,window.clearTimeout(e.timerId),e.timerId=void 0},200))},t.componentWillUnmount=function(){this.timerId&&window.clearTimeout(this.timerId)},t.render=function(){return s.createElement("input",{type:"file",ref:this.input,accept:this.props.accept,style:{position:"absolute",zIndex:-1,left:0,top:0,width:0,height:0,opacity:0},onChange:this.props.onChange})},i}(s.Component),se=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.inputFile=s.createRef(),e.onImageChanged=e.onImageChanged.bind(g(e)),e.handleCustomImageUpload=e.handleCustomImageUpload.bind(g(e)),e.handleImageUpload=e.handleImageUpload.bind(g(e)),e.state={show:!1},e}var t=i.prototype;return t.handleImageUpload=function(){var e=this.editorConfig.onImageUpload;typeof e=="function"?this.inputFile.current&&this.inputFile.current.click():this.editor.insertMarkdown("image")},t.onImageChanged=function(e){var o=this.editorConfig.onImageUpload;if(o){var a=Ee(e,o);this.editor.insertPlaceholder(a.placeholder,a.uploaded)}},t.handleCustomImageUpload=function(e){var o=this,a=this.editorConfig.onCustomImageUpload;if(a){var l=a.call(this,e);Y(l)&&l.then(function(u){u&&u.url&&o.editor.insertMarkdown("image",{target:u.text,imageUrl:u.url})})}},t.render=function(){var e=this,o=!!this.editorConfig.onCustomImageUpload;return o?s.createElement("span",{className:"button button-type-image",title:v.get("btnImage"),onClick:this.handleCustomImageUpload},s.createElement(k,{type:"image"})):s.createElement("span",{className:"button button-type-image",title:v.get("btnImage"),onClick:this.handleImageUpload,style:{position:"relative"}},s.createElement(k,{type:"image"}),s.createElement(je,{accept:this.editorConfig.imageAccept||"",ref:this.inputFile,onChange:function(l){l.persist(),l.target.files&&l.target.files.length>0&&e.onImageChanged(l.target.files[0])}}))},i}(C);se.pluginName="image";var le=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboard={key:"k",keyCode:75,aliasCommand:!0,withKey:["ctrlKey"],callback:function(){return e.editor.insertMarkdown("link")}},e}var t=i.prototype;return t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-link",title:v.get("btnLink"),onClick:function(){return e.editor.insertMarkdown("link")}},s.createElement(k,{type:"link"}))},i}(C);le.pluginName="link";var ue=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboard={key:"7",keyCode:55,withKey:["ctrlKey","shiftKey"],aliasCommand:!0,callback:function(){return e.editor.insertMarkdown("order")}},e}var t=i.prototype;return t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-ordered",title:v.get("btnOrdered"),onClick:function(){return e.editor.insertMarkdown("order")}},s.createElement(k,{type:"list-ordered"}))},i}(C);ue.pluginName="list-ordered";var ce=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboard={key:"8",keyCode:56,withKey:["ctrlKey","shiftKey"],aliasCommand:!0,callback:function(){return e.editor.insertMarkdown("unordered")}},e}var t=i.prototype;return t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){var e=this;return s.createElement("span",{className:"button button-type-unordered",title:v.get("btnUnordered"),onClick:function(){return e.editor.insertMarkdown("unordered")}},s.createElement(k,{type:"list-unordered"}))},i}(C);ce.pluginName="list-unordered";var Ze=100,Je=function(){function r(t){t===void 0&&(t={}),this.record=[],this.recycle=[],this.initValue="";var n=t,e=n.maxSize,o=e===void 0?Ze:e;this.maxSize=o}var i=r.prototype;return i.push=function(n){for(var e=this.record.push(n);this.record.length>this.maxSize;)this.record.shift();return e},i.get=function(){return this.record},i.getLast=function(){var n=this.record.length;return this.record[n-1]},i.undo=function(n){var e=this.record.pop();if(typeof e>"u")return this.initValue;if(e!==n)return this.recycle.push(e),e;var o=this.record.pop();return typeof o>"u"?(this.recycle.push(e),this.initValue):(this.recycle.push(e),o)},i.redo=function(){var n=this.recycle.pop();if(typeof n<"u")return this.push(n),n},i.cleanRedo=function(){this.recycle=[]},i.getUndoCount=function(){return this.undo.length},i.getRedoCount=function(){return this.recycle.length},r}(),de=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleKeyboards=[],e.lastPop=null,e.handleChange=e.handleChange.bind(g(e)),e.handleRedo=e.handleRedo.bind(g(e)),e.handleUndo=e.handleUndo.bind(g(e)),e.handleKeyboards=[{key:"y",keyCode:89,withKey:["ctrlKey"],callback:e.handleRedo},{key:"z",keyCode:90,withKey:["metaKey","shiftKey"],callback:e.handleRedo},{key:"z",keyCode:90,aliasCommand:!0,withKey:["ctrlKey"],callback:e.handleUndo}],e.logger=new Je({maxSize:e.editorConfig.loggerMaxSize}),e.editor.registerPluginApi("undo",e.handleUndo),e.editor.registerPluginApi("redo",e.handleRedo),e}var t=i.prototype;return t.handleUndo=function(){var e=this.logger.undo(this.editor.getMdValue());typeof e<"u"&&(this.pause(),this.lastPop=e,this.editor.setText(e),this.forceUpdate())},t.handleRedo=function(){var e=this.logger.redo();typeof e<"u"&&(this.lastPop=e,this.editor.setText(e),this.forceUpdate())},t.handleChange=function(e,o,a){var l=this;if(!(this.logger.getLast()===e||this.lastPop!==null&&this.lastPop===e)){if(this.logger.cleanRedo(),a){this.logger.push(e),this.lastPop=null,this.forceUpdate();return}this.timerId&&(window.clearTimeout(this.timerId),this.timerId=0),this.timerId=window.setTimeout(function(){l.logger.getLast()!==e&&(l.logger.push(e),l.lastPop=null,l.forceUpdate()),window.clearTimeout(l.timerId),l.timerId=0},this.editorConfig.loggerInterval)}},t.componentDidMount=function(){var e=this;this.editor.on("change",this.handleChange),this.handleKeyboards.forEach(function(o){return e.editor.onKeyboard(o)}),this.logger.initValue=this.editor.getMdValue(),this.forceUpdate()},t.componentWillUnmount=function(){var e=this;this.timerId&&window.clearTimeout(this.timerId),this.editor.off("change",this.handleChange),this.editor.unregisterPluginApi("undo"),this.editor.unregisterPluginApi("redo"),this.handleKeyboards.forEach(function(o){return e.editor.offKeyboard(o)})},t.pause=function(){this.timerId&&(window.clearTimeout(this.timerId),this.timerId=void 0)},t.render=function(){var e=this.logger.getUndoCount()>1||this.logger.initValue!==this.editor.getMdValue(),o=this.logger.getRedoCount()>0;return s.createElement(s.Fragment,null,s.createElement("span",{className:"button button-type-undo "+(e?"":"disabled"),title:v.get("btnUndo"),onClick:this.handleUndo},s.createElement(k,{type:"undo"})),s.createElement("span",{className:"button button-type-redo "+(o?"":"disabled"),title:v.get("btnRedo"),onClick:this.handleRedo},s.createElement(k,{type:"redo"})))},i}(C);de.pluginName="logger";var _;(function(r){r[r.SHOW_ALL=0]="SHOW_ALL",r[r.SHOW_MD=1]="SHOW_MD",r[r.SHOW_HTML=2]="SHOW_HTML"})(_||(_={}));var W=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.handleClick=e.handleClick.bind(g(e)),e.handleChange=e.handleChange.bind(g(e)),e.state={view:e.editor.getView()},e}var t=i.prototype;return t.handleClick=function(){switch(this.next){case _.SHOW_ALL:this.editor.setView({html:!0,md:!0});break;case _.SHOW_HTML:this.editor.setView({html:!0,md:!1});break;case _.SHOW_MD:this.editor.setView({html:!1,md:!0});break}},t.handleChange=function(e){this.setState({view:e})},t.componentDidMount=function(){this.editor.on("viewchange",this.handleChange)},t.componentWillUnmount=function(){this.editor.off("viewchange",this.handleChange)},t.getDisplayInfo=function(){var e=this.next;switch(e){case _.SHOW_ALL:return{icon:"view-split",title:"All"};case _.SHOW_HTML:return{icon:"visibility",title:"Preview"};default:return{icon:"keyboard",title:"Editor"}}},t.render=function(){if(this.isDisplay){var e=this.getDisplayInfo();return s.createElement("span",{className:"button button-type-mode",title:v.get("btnMode"+e.title),onClick:this.handleClick},s.createElement(k,{type:e.icon}))}return null},ye(i,[{key:"isDisplay",get:function(){var e=this.editorConfig.canView;return e?[e.html,e.md,e.both].filter(function(o){return o}).length>=2:!1}},{key:"next",get:function(){var e=this.editorConfig.canView,o=this.state.view,a=[_.SHOW_ALL,_.SHOW_MD,_.SHOW_HTML];e&&(e.both||a.splice(a.indexOf(_.SHOW_ALL),1),e.md||a.splice(a.indexOf(_.SHOW_MD),1),e.html||a.splice(a.indexOf(_.SHOW_HTML),1));var l=_.SHOW_MD;if(o.html&&(l=_.SHOW_HTML),o.html&&o.md&&(l=_.SHOW_ALL),a.length===0)return l;if(a.length===1)return a[0];var u=a.indexOf(l);return u<a.length-1?a[u+1]:a[0]}}]),i}(C);W.pluginName="mode-toggle";W.align="right";var Xe=function(r){y(i,r);function i(n){var e;e=r.call(this,n)||this,e.config={padding:3,width:20,height:20};var o=n.maxRow,a=o===void 0?5:o,l=n.maxCol,u=l===void 0?6:l;return e.state={maxRow:a,maxCol:u,list:e.formatTableModel(a,u)},e}var t=i.prototype;return t.formatTableModel=function(e,o){e===void 0&&(e=0),o===void 0&&(o=0);var a=new Array(e).fill(void 0);return a.map(function(l){return new Array(o).fill(0)})},t.calcWrapStyle=function(){var e=this.state,o=e.maxRow,a=e.maxCol,l=this.config,u=l.width,d=l.height,c=l.padding,h=(u+c)*a-c,p=(d+c)*o-c;return{width:h+"px",height:p+"px"}},t.calcItemStyle=function(e,o){e===void 0&&(e=0),o===void 0&&(o=0);var a=this.config,l=a.width,u=a.height,d=a.padding,c=(u+d)*e,h=(l+d)*o;return{top:c+"px",left:h+"px"}},t.getList=function(e,o){var a=this.state.list;return a.map(function(l,u){return l.map(function(d,c){return u<=e&&c<=o?1:0})})},t.handleHover=function(e,o){this.setState({list:this.getList(e,o)})},t.handleSetTable=function(e,o){var a=this.props.onSetTable;typeof a=="function"&&a({row:e+1,col:o+1})},t.componentDidUpdate=function(e){this.props.visibility===!1&&e.visibility!==this.props.visibility&&this.setState({list:this.getList(-1,-1)})},t.render=function(){var e=this;return s.createElement("ul",{className:"table-list wrap",style:this.calcWrapStyle()},this.state.list.map(function(o,a){return o.map(function(l,u){return s.createElement("li",{className:"list-item "+(l===1?"active":""),key:a+"-"+u,style:e.calcItemStyle(a,u),onMouseOver:e.handleHover.bind(e,a,u),onClick:e.handleSetTable.bind(e,a,u)})})}))},i}(s.Component),O=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.show=e.show.bind(g(e)),e.hide=e.hide.bind(g(e)),e.state={show:!1},e}var t=i.prototype;return t.show=function(){this.setState({show:!0})},t.hide=function(){this.setState({show:!1})},t.render=function(){var e=this,o=this.editorConfig.table||this.props.config;return s.createElement("span",{className:"button button-type-table",title:v.get("btnTable"),onMouseEnter:this.show,onMouseLeave:this.hide},s.createElement(k,{type:"grid"}),s.createElement(oe,{show:this.state.show,onClose:this.hide},s.createElement(Xe,{visibility:this.state.show,maxRow:o.maxRow,maxCol:o.maxCol,onSetTable:function(l){return e.editor.insertMarkdown("table",l)}})))},i}(C);O.pluginName="table";O.defaultConfig={maxRow:6,maxCol:6};var et=function(r){y(i,r);function i(){return r.apply(this,arguments)||this}var t=i.prototype;return t.handleSelectMapValue=function(e){var o=this.props.onSelectMapValue;typeof o=="function"&&o(e)},t.render=function(){var e=this,o=this.props.value;return s.createElement("ul",{className:"tab-map-list"},[1,2,4,8].map(function(a){return s.createElement("li",{key:a,className:_e("list-item",{active:o===a})},s.createElement("div",{onClick:e.handleSelectMapValue.bind(e,a)},a===1?v.get("tab"):a+" "+v.get("spaces")))}))},i}(s.Component),he=function(r){y(i,r);function i(n){var e;return e=r.call(this,n)||this,e.show=e.show.bind(g(e)),e.hide=e.hide.bind(g(e)),e.handleChangeMapValue=e.handleChangeMapValue.bind(g(e)),e.state={tabMapValue:e.getConfig("tabMapValue"),show:!1},e.handleKeyboard={key:"Tab",keyCode:9,aliasCommand:!0,withKey:[],callback:function(){return e.editor.insertMarkdown("tab",{tabMapValue:e.state.tabMapValue})}},e}var t=i.prototype;return t.show=function(){this.setState({show:!0})},t.hide=function(){this.setState({show:!1})},t.handleChangeMapValue=function(e){this.setState({tabMapValue:e})},t.componentDidMount=function(){this.editorConfig.shortcuts&&this.editor.onKeyboard(this.handleKeyboard)},t.componentWillUnmount=function(){this.editor.offKeyboard(this.handleKeyboard)},t.render=function(){return s.createElement("span",{className:"button button-type-header",title:v.get("selectTabMap"),onClick:this.show,onMouseLeave:this.hide},s.createElement(k,{type:"tab"}),s.createElement(oe,{show:this.state.show,onClose:this.hide},s.createElement(et,{value:this.state.tabMapValue,onSelectMapValue:this.handleChangeMapValue})))},i}(C);he.pluginName="tab-insert";he.defaultConfig={tabMapValue:1};S.use(ae);S.use(te);S.use(ne);S.use(ie);S.use(re);S.use(ce);S.use(ue);S.use(J);S.use(X);S.use(Z);S.use(j);S.use(O);S.use(se);S.use(le);S.use(ee);S.use(de);S.use(W);S.use(D);var nt={Header:ae,FontBold:te,FontItalic:ne,FontUnderline:ie,FontStrikethrough:re,ListUnordered:ce,ListOrdered:ue,BlockQuote:J,BlockWrap:X,BlockCodeInline:Z,BlockCodeBlock:j,Table:O,Image:se,Link:le,Clear:ee,Logger:de,ModeToggle:W,FullScreen:D,AutoResize:A,TabInsert:he};export{oe as DropList,C as PluginComponent,nt as Plugins,S as default,Q as getDecorated};
